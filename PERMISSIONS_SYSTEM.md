# ๐ ูุธุงู ุงูุตูุงุญูุงุช ุงูุดุงูู - ุฏููู ูุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุธุงู ุตูุงุญูุงุช ูุชูุฏู ููุฑู ูุณูุญ ุจุงูุชุญูู ุงูุฏููู ูู ูุตูู ุงูููุธููู ุฅูู ูุฎุชูู ุฃุฌุฒุงุก ุงููุธุงู.

---

## ๐ฏ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### โ **ุตูุงุญูุงุช ุชูุตูููุฉ**
- 20 ุตูุงุญูุฉ ูููุตูุฉ ุชุบุทู ุฌููุน ุฌูุงูุจ ุงููุธุงู
- ุฅููุงููุฉ ุชุฎุตูุต ุงูุตูุงุญูุงุช ููู ููุธู ุนูู ุญุฏุฉ
- ุฃุฏูุงุฑ ูุญุฏุฏุฉ ูุณุจูุงู ููุชุทุจูู ุงูุณุฑูุน

### โ **ูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู**
- ูุงุฌูุฉ ูุฑุฆูุฉ ุงุญุชุฑุงููุฉ ูุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช
- ุชุทุจูู ุฃุฏูุงุฑ ุฌุงูุฒุฉ ุจููุฑุฉ ูุงุญุฏุฉ
- ุชุนุฏูู ุชูุตููู ููุตูุงุญูุงุช ุงููุฑุฏูุฉ

### โ **ุญูุงูุฉ ูููุฉ**
- Decorators ูุญูุงูุฉ ุงูู Views
- Template tags ููุชุญูู ูู ุงูุนุฑุถ
- ููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู ุชููุงุฆูุงู

---

## ๐ ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ

### ๐ข **ุฅุฏุงุฑุฉ ุงูุนูุงุฑุงุช**
| ุงูุตูุงุญูุฉ | ุงููุตู |
|---------|-------|
| `can_view_buildings` | ุนุฑุถ ุงููุจุงูู |
| `can_manage_buildings` | ุฅุฏุงุฑุฉ ุงููุจุงูู (ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู) |
| `can_view_units` | ุนุฑุถ ุงููุญุฏุงุช |
| `can_manage_units` | ุฅุฏุงุฑุฉ ุงููุญุฏุงุช (ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู) |

### ๐ **ุฅุฏุงุฑุฉ ุงูุนููุฏ**
| ุงูุตูุงุญูุฉ | ุงููุตู |
|---------|-------|
| `can_view_leases` | ุนุฑุถ ุงูุนููุฏ |
| `can_manage_leases` | ุฅุฏุงุฑุฉ ุงูุนููุฏ (ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐูุ ุชุฌุฏูุฏุ ุฅูุบุงุก) |

### ๐ฅ **ุฅุฏุงุฑุฉ ุงููุณุชุฃุฌุฑูู**
| ุงูุตูุงุญูุฉ | ุงููุตู |
|---------|-------|
| `can_view_tenants` | ุนุฑุถ ุงููุณุชุฃุฌุฑูู |
| `can_manage_tenants` | ุฅุฏุงุฑุฉ ุงููุณุชุฃุฌุฑูู (ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู) |

### ๐ฐ **ุงูุนูููุงุช ุงููุงููุฉ**
| ุงูุตูุงุญูุฉ | ุงููุตู |
|---------|-------|
| `can_view_payments` | ุนุฑุถ ุงูุฏูุนุงุช |
| `can_manage_payments` | ุฅุฏุงุฑุฉ ุงูุฏูุนุงุช (ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู) |
| `can_view_invoices` | ุนุฑุถ ุงูููุงุชูุฑ |
| `can_manage_invoices` | ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ (ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู) |
| `can_view_expenses` | ุนุฑุถ ุงููุตุฑููุงุช |
| `can_manage_expenses` | ุฅุฏุงุฑุฉ ุงููุตุฑููุงุช (ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู) |

### โ๏ธ **ุงูุฅูุฐุงุฑุงุช**
| ุงูุตูุงุญูุฉ | ุงููุตู |
|---------|-------|
| `can_view_notices` | ุนุฑุถ ุงูุฅูุฐุงุฑุงุช |
| `can_manage_notices` | ุฅุฏุงุฑุฉ ุงูุฅูุฐุงุฑุงุช (ุฅูุดุงุกุ ุชุนุฏููุ ุฅุฑุณุงู) |

### ๐ **ุงูุชูุงุฑูุฑ**
| ุงูุตูุงุญูุฉ | ุงููุตู |
|---------|-------|
| `can_view_reports` | ุนุฑุถ ุงูุชูุงุฑูุฑ |
| `can_export_reports` | ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ (PDF/Excel) |

### ๐ **ุงูุฅุฏุงุฑุฉ**
| ุงูุตูุงุญูุฉ | ุงููุตู |
|---------|-------|
| `can_manage_users` | ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุตูุงุญูุงุชูู |
| `can_access_settings` | ุงููุตูู ุฅูู ุฅุนุฏุงุฏุงุช ุงููุธุงู |

---

## ๐ ุงูุฃุฏูุงุฑ ุงููุญุฏุฏุฉ ูุณุจูุงู

### 1๏ธโฃ **ูุฏูุฑ ุนูุงุฑุงุช** (`property_manager`)
```
โ ุนุฑุถ ุงููุจุงูู
โ ุนุฑุถ ูุฅุฏุงุฑุฉ ุงููุญุฏุงุช
โ ุนุฑุถ ูุฅุฏุงุฑุฉ ุงูุนููุฏ
โ ุนุฑุถ ุงููุณุชุฃุฌุฑูู
โ ุงูุนูููุงุช ุงููุงููุฉ
โ ุงูุฅูุฐุงุฑุงุช
โ ุงูุชูุงุฑูุฑ
โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
```

### 2๏ธโฃ **ูุฏูุฑ ูุงูู** (`financial_manager`)
```
โ ุนุฑุถ ุงููุจุงูู ูุงููุญุฏุงุช
โ ุนุฑุถ ุงูุนููุฏ ูุงููุณุชุฃุฌุฑูู
โ ุฅุฏุงุฑุฉ ูุงููุฉ ููุนูููุงุช ุงููุงููุฉ
โ ุฅุฏุงุฑุฉ ุงูุฅูุฐุงุฑุงุช
โ ุนุฑุถ ูุชุตุฏูุฑ ุงูุชูุงุฑูุฑ
โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
```

### 3๏ธโฃ **ูุฏูุฑ ุงููุณุชุฃุฌุฑูู** (`tenant_manager`)
```
โ ุนุฑุถ ุงููุจุงูู ูุงููุญุฏุงุช
โ ุนุฑุถ ุงูุนููุฏ
โ ุนุฑุถ ูุฅุฏุงุฑุฉ ุงููุณุชุฃุฌุฑูู
โ ุงูุนูููุงุช ุงููุงููุฉ
โ ุงูุฅูุฐุงุฑุงุช
โ ุงูุชูุงุฑูุฑ
โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
```

### 4๏ธโฃ **ูุดุงูุฏ** (`viewer`)
```
โ ุนุฑุถ ุฌููุน ุงูุจูุงูุงุช
โ ูุง ููููู ุงูุชุนุฏูู ุฃู ุงูุฅุถุงูุฉ ุฃู ุงูุญุฐู
โ ูุง ููููู ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ
```

---

## ๐ ุฏููู ุงูุงุณุชุฎุฏุงู

### 1. **ุฅุฏุงุฑุฉ ุตูุงุญูุงุช ูุณุชุฎุฏู**

#### ุงูุทุฑููุฉ ุงูุฃููู: ูู ูุงุฌูุฉ ุงููุณุชุฎุฏููู
1. ุงุฐูุจ ุฅูู **ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู**
2. ุงุถุบุท ุนูู ุฃููููุฉ ๐ ุจุฌุงูุจ ุงููุณุชุฎุฏู
3. ุงุฎุชุฑ ุฏูุฑ ูุญุฏุฏ ูุณุจูุงู ุฃู ุนุฏู ุงูุตูุงุญูุงุช ูุฏููุงู
4. ุงุถุบุท **ุญูุธ ุงูุตูุงุญูุงุช**

#### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ูู ุฎูุงู URL ูุจุงุดุฑ
```
/dashboard/users/{user_id}/permissions/
```

### 2. **ุชุทุจูู ุฏูุฑ ูุญุฏุฏ**
ูู ุตูุญุฉ ุตูุงุญูุงุช ุงููุณุชุฎุฏูุ ุงุถุบุท ุนูู ุฃุญุฏ ุงูุฃุฏูุงุฑ ุงููุญุฏุฏุฉ ูุณุจูุงู:
- ูุฏูุฑ ุนูุงุฑุงุช
- ูุฏูุฑ ูุงูู
- ูุฏูุฑ ุงููุณุชุฃุฌุฑูู
- ูุดุงูุฏ

### 3. **ุชุฎุตูุต ุงูุตูุงุญูุงุช**
- ุญุฏุฏ ุงูุตูุงุญูุงุช ุงููุทููุจุฉ ูู ุงููุงุฆูุฉ
- ูููู ุงูุฌูุน ุจูู ุตูุงุญูุงุช ูุชุนุฏุฏุฉ
- ุงุญูุธ ุงูุชุบููุฑุงุช

---

## ๐ป ูููุทูุฑูู

### ุงุณุชุฎุฏุงู Decorators ูู Views

#### ูุซุงู 1: ุตูุงุญูุฉ ูุงุญุฏุฉ
```python
from dashboard.decorators import permission_required

@permission_required('can_manage_units')
def add_unit(request):
    # ูุฐุง ุงูู view ูุชุทูุจ ุตูุงุญูุฉ ุฅุฏุงุฑุฉ ุงููุญุฏุงุช
    pass
```

#### ูุซุงู 2: ุฃู ุตูุงุญูุฉ ูู ุนุฏุฉ ุตูุงุญูุงุช
```python
from dashboard.decorators import any_permission_required

@any_permission_required('can_view_units', 'can_manage_units')
def unit_list(request):
    # ูููู ุงููุตูู ุจุตูุงุญูุฉ ุนุฑุถ ุฃู ุฅุฏุงุฑุฉ
    pass
```

#### ูุซุงู 3: ุฌููุน ุงูุตูุงุญูุงุช ูุทููุจุฉ
```python
from dashboard.decorators import all_permissions_required

@all_permissions_required('can_view_payments', 'can_manage_payments')
def payment_operations(request):
    # ูุชุทูุจ ููุง ุงูุตูุงุญูุชูู
    pass
```

### ุงุณุชุฎุฏุงู Template Tags

#### ูู ุงูููุงูุจ
```django
{% load dashboard_extras %}

<!-- ุทุฑููุฉ 1: ุจุงุณุชุฎุฏุงู has_permission -->
{% has_permission 'can_manage_units' as can_edit %}
{% if can_edit %}
    <a href="{% url 'unit_create' %}">ุฅุถุงูุฉ ูุญุฏุฉ</a>
{% endif %}

<!-- ุทุฑููุฉ 2: ุจุงุณุชุฎุฏุงู filter -->
{% if request.user|has_perm:'can_manage_units' %}
    <button>ุชุนุฏูู</button>
{% endif %}

<!-- ุทุฑููุฉ 3: ุงููุตูู ูุญูู ุงูุตูุงุญูุฉ ูุจุงุดุฑุฉ -->
{% if profile|get_attr:'can_manage_units' %}
    <button>ุฅุฏุงุฑุฉ</button>
{% endif %}
```

### ุงูุชุญูู ูู ุงูููุฏ Python
```python
# ูู ุงูู View
if request.user.profile.has_permission('can_manage_units'):
    # ุงูุณูุงุญ ุจุงูุนูููุฉ
    pass

# ุงูุญุตูู ุนูู ุฌููุน ุงูุตูุงุญูุงุช
permissions = request.user.profile.get_all_permissions()
```

---

## ๐๏ธ ุฃูุงูุฑ ุงูุฅุฏุงุฑุฉ

### ุฅุนุฏุงุฏ ุงูุตูุงุญูุงุช ุงูุงูุชุฑุงุถูุฉ
```bash
# ุฅูุดุงุก profiles ูููุณุชุฎุฏููู ุงูููุฌูุฏูู
python3 manage.py setup_default_permissions

# ุชุทุจูู ุฏูุฑ ูุญุฏุฏ ุนูู ุฌููุน ุงููุณุชุฎุฏููู
python3 manage.py setup_default_permissions --role=property_manager

# ุฅุนุงุฏุฉ ุชุนููู ุฌููุน ุงูุตูุงุญูุงุช
python3 manage.py setup_default_permissions --reset
```

---

## ๐ ููุงุญุธุงุช ูุงูุฉ

### โ๏ธ **ููุงุนุฏ ูููุฉ**
1. **ุงููุณุชุฎุฏููู ุงูุฅุฏุงุฑููู (Superusers)** ูุฏููู ุฌููุน ุงูุตูุงุญูุงุช ุชููุงุฆูุงู
2. ุตูุงุญูุฉ **"ุงูุนุฑุถ"** ูุฌุจ ุฃู ุชููู ููุฌูุฏุฉ ูุจู ููุญ ุตูุงุญูุฉ **"ุงูุฅุฏุงุฑุฉ"**
3. ูููู ุชุทุจูู ุฏูุฑ ูุญุฏุฏ ุซู ุชุนุฏููู ุญุณุจ ุงูุญุงุฌุฉ
4. ุงูุชุบููุฑุงุช ุชุทุจู ููุฑุงู ุนูู ุงููุณุชุฎุฏู

### ๐ **ุงูุฃูุงู**
- ุฌููุน Views ูุญููุฉ ุจู Decorators
- ูุง ูููู ุงููุตูู ุฅูู ุตูุญุฉ ุจุฏูู ุงูุตูุงุญูุฉ ุงููุทููุจุฉ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุนูุฏ ูุญุงููุฉ ุงููุตูู ุบูุฑ ุงููุตุฑุญ

### ๐ฑ **ุงูุชูุงูู**
- ูุนูู ูุน ุฌููุน ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉ
- ุชุตููู ูุชุฌุงูุจ ููููุงุชู ูุงูุฃุฌูุฒุฉ ุงูููุญูุฉ
- ุฏุนู ูุงูู ููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ

---

## ๐จ ูุซุงู ุนููู

### ุณููุงุฑูู: ููุธู ุฅุฏุงุฑุฉ ุนูุงุฑุงุช

**ุงููุทููุจ:**
- ูุณุชุทูุน ุฑุคูุฉ ุฌููุน ุงููุจุงูู ูุงููุญุฏุงุช
- ูุณุชุทูุน ุฅุถุงูุฉ ูุชุนุฏูู ุงููุญุฏุงุช
- ูุณุชุทูุน ุฅุฏุงุฑุฉ ุงูุนููุฏ
- **ูุง** ูุณุชุทูุน ุฑุคูุฉ ุงูุนูููุงุช ุงููุงููุฉ

**ุงูุญู:**
1. ุงุฐูุจ ูุตูุญุฉ ุตูุงุญูุงุช ุงูููุธู
2. ุงุถุบุท ุนูู "ูุฏูุฑ ุนูุงุฑุงุช"
3. ุฃู ุญุฏุฏ ุงูุตูุงุญูุงุช ูุฏููุงู:
   - โ ุนุฑุถ ุงููุจุงูู
   - โ ุนุฑุถ ุงููุญุฏุงุช
   - โ ุฅุฏุงุฑุฉ ุงููุญุฏุงุช
   - โ ุนุฑุถ ุงูุนููุฏ
   - โ ุฅุฏุงุฑุฉ ุงูุนููุฏ
   - โ ุนุฑุถ ุงููุณุชุฃุฌุฑูู

---

## ๐ ุงููููุงุช ุงููุถุงูุฉ/ุงููุนุฏูุฉ

### ูููุงุช ุฌุฏูุฏุฉ:
1. `dashboard/decorators.py` - Decorators ูุญูุงูุฉ ุงูู Views
2. `dashboard/management/commands/setup_default_permissions.py` - ุฃูุฑ ุงูุฅุนุฏุงุฏ
3. `templates/dashboard/user_permissions.html` - ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช

### ูููุงุช ูุนุฏูุฉ:
1. `dashboard/models.py` - ุฅุถุงูุฉ 20 ุญูู ุตูุงุญูุฉ + ุฏูุงู ูุณุงุนุฏุฉ
2. `dashboard/views.py` - ุฅุถุงูุฉ UserPermissionsView
3. `dashboard/urls.py` - ุฅุถุงูุฉ ูุณุงุฑ ุงูุตูุงุญูุงุช
4. `dashboard/templatetags/dashboard_extras.py` - Template tags ููุตูุงุญูุงุช
5. `templates/dashboard/user_management.html` - ุฒุฑ ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช
6. `dashboard/migrations/0007_add_user_permissions.py` - Migration ุฌุฏูุฏ

---

## โ ุฎุทูุงุช ุงูุชูุนูู

### 1. ุชุทุจูู Migration (ุชู โ)
```bash
python3 manage.py migrate dashboard
```

### 2. ุฅุนุฏุงุฏ ุงูุตูุงุญูุงุช ูููุณุชุฎุฏููู ุงูููุฌูุฏูู
```bash
python3 manage.py setup_default_permissions
```

### 3. ุชุฎุตูุต ุงูุตูุงุญูุงุช
- ุงุฐูุจ ูุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- ุงุถุบุท ุนูู ๐ ููู ูุณุชุฎุฏู
- ุงุฎุชุฑ ุงูุฏูุฑ ุงูููุงุณุจ

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

โ **ูุธุงู ุตูุงุญูุงุช ูุชูุงูู ูุขูู**
โ **ุณูู ุงูุงุณุชุฎุฏุงู ูุงูุฅุฏุงุฑุฉ**
โ **ูุฑู ููุงุจู ููุชูุณุน**
โ **ูุญูู ููุคูู**
โ **ูุชูุงูู ูุน ุฌููุน ุฃุฌุฒุงุก ุงููุธุงู**

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ูุฃู ุงุณุชูุณุงุฑ ุฃู ูุดููุฉ:
1. ุฑุงุฌุน ูุฐุง ุงูุฏููู ุฃููุงู
2. ุชุญูู ูู ุฃู Migration ุชู ุชุทุจููู
3. ุชุฃูุฏ ูู ุชุดุบูู ุฃูุฑ ุงูุฅุนุฏุงุฏ
4. ุชุญูู ูู ุงูุตูุงุญูุงุช ูู ุตูุญุฉ ุงููุณุชุฎุฏู

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ:** ูุธุงู ุฅุฏุงุฑุฉ ุงูุฅูุฌุงุฑุงุช  
**ุงูุชุงุฑูุฎ:** 2025  
**ุงูุฅุตุฏุงุฑ:** 1.0
