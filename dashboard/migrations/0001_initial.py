# Generated by Django 4.2.25 on 2025-10-21 13:20

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('contenttypes', '0002_remove_content_type_name'),
    ]

    operations = [
        migrations.CreateModel(
            name='Building',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='اسم المبنى')),
                ('name_ar', models.CharField(max_length=100, null=True, verbose_name='اسم المبنى')),
                ('name_en', models.CharField(max_length=100, null=True, verbose_name='اسم المبنى')),
                ('address', models.TextField(verbose_name='العنوان')),
                ('address_ar', models.TextField(null=True, verbose_name='العنوان')),
                ('address_en', models.TextField(null=True, verbose_name='العنوان')),
            ],
            options={
                'verbose_name': 'مبنى',
                'verbose_name_plural': 'المباني',
            },
        ),
        migrations.CreateModel(
            name='BuildingOwner',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم المالك')),
                ('owner_type', models.CharField(choices=[('individual', 'فرد'), ('company', 'شركة'), ('government', 'حكومي')], default='individual', max_length=20, verbose_name='نوع المالك')),
                ('phone', models.CharField(max_length=20, verbose_name='رقم الهاتف')),
                ('email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='البريد الإلكتروني')),
                ('address', models.TextField(blank=True, null=True, verbose_name='العنوان')),
                ('national_id', models.CharField(blank=True, max_length=50, null=True, verbose_name='رقم الهوية/السجل التجاري')),
                ('bank_account', models.CharField(blank=True, max_length=50, null=True, verbose_name='رقم الحساب البنكي')),
                ('bank_name', models.CharField(blank=True, max_length=100, null=True, verbose_name='اسم البنك')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
            ],
            options={
                'verbose_name': 'مالك مبنى',
                'verbose_name_plural': 'مالكو المباني',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='CommissionAgreement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('agreement_number', models.CharField(max_length=50, unique=True, verbose_name='رقم الاتفاقية')),
                ('commission_rate', models.DecimalField(decimal_places=2, help_text='النسبة المئوية من الإيجار الشهري', max_digits=5, verbose_name='نسبة العمولة (%)')),
                ('start_date', models.DateField(verbose_name='تاريخ بدء الاتفاقية')),
                ('end_date', models.DateField(verbose_name='تاريخ انتهاء الاتفاقية')),
                ('status', models.CharField(choices=[('active', 'نشط'), ('expired', 'منتهي'), ('cancelled', 'ملغي')], default='active', max_length=20, verbose_name='حالة الاتفاقية')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('building', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='dashboard.building', verbose_name='المبنى')),
                ('building_owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='dashboard.buildingowner', verbose_name='مالك المبنى')),
            ],
            options={
                'verbose_name': 'اتفاقية عمولة',
                'verbose_name_plural': 'اتفاقيات العمولة',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Company',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم الشركة')),
                ('name_ar', models.CharField(max_length=200, null=True, verbose_name='اسم الشركة')),
                ('name_en', models.CharField(max_length=200, null=True, verbose_name='اسم الشركة')),
                ('company_id', models.CharField(blank=True, help_text='رقم السجل التجاري أو الهوية الضريبية', max_length=50, null=True, verbose_name='هوية الشركة')),
                ('logo', models.ImageField(blank=True, null=True, upload_to='company_logos/', verbose_name='الشعار')),
                ('contact_email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='البريد الإلكتروني للتواصل')),
                ('contact_phone', models.CharField(blank=True, max_length=20, null=True, verbose_name=' الهاتف للتواصل')),
                ('address', models.TextField(blank=True, null=True, verbose_name='العنوان')),
                ('address_ar', models.TextField(blank=True, null=True, verbose_name='العنوان')),
                ('address_en', models.TextField(blank=True, null=True, verbose_name='العنوان')),
            ],
            options={
                'verbose_name': 'ملف الشركة',
                'verbose_name_plural': 'ملف الشركة',
            },
        ),
        migrations.CreateModel(
            name='ContractTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='عنوان القالب')),
                ('body', models.TextField(help_text='استخدم HTML لتخصيص القالب.', verbose_name='محتوى القالب')),
            ],
            options={
                'verbose_name': 'قالب عقد',
                'verbose_name_plural': 'قوالب العقود',
            },
        ),
        migrations.CreateModel(
            name='Invoice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('invoice_number', models.CharField(max_length=50, unique=True, verbose_name='رقم الفاتورة')),
                ('issue_date', models.DateField(default=django.utils.timezone.now, verbose_name='تاريخ الإصدار')),
                ('due_date', models.DateField(verbose_name='تاريخ الاستحقاق')),
                ('status', models.CharField(choices=[('draft', 'مسودة'), ('sent', 'مرسلة'), ('paid', 'مدفوعة'), ('overdue', 'متأخرة'), ('cancelled', 'ملغاة')], default='draft', max_length=20, verbose_name='الحالة')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
            ],
            options={
                'verbose_name': 'فاتورة',
                'verbose_name_plural': 'الفواتير',
                'ordering': ['-issue_date'],
            },
        ),
        migrations.CreateModel(
            name='Lease',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('contract_number', models.CharField(max_length=50, unique=True, verbose_name='رقم العقد')),
                ('contract_form_number', models.CharField(blank=True, max_length=50, null=True, verbose_name='رقم نموذج العقد')),
                ('monthly_rent', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='مبلغ الإيجار الشهري')),
                ('start_date', models.DateField(verbose_name='تاريخ بدء العقد')),
                ('end_date', models.DateField(verbose_name='تاريخ انتهاء العقد')),
                ('electricity_meter', models.CharField(blank=True, max_length=50, null=True, verbose_name='رقم عداد الكهرباء')),
                ('water_meter', models.CharField(blank=True, max_length=50, null=True, verbose_name='رقم عداد المياه')),
                ('status', models.CharField(choices=[('active', 'نشط'), ('expiring_soon', 'قريب الانتهاء'), ('expired', 'منتهي'), ('renewed', 'تم تجديد'), ('cancelled', 'ملغي')], default='active', editable=False, max_length=20, verbose_name='حالة العقد')),
                ('office_fee', models.DecimalField(decimal_places=2, default=5.0, max_digits=10, verbose_name='رسوم المكتب')),
                ('admin_fee', models.DecimalField(decimal_places=2, default=1.0, max_digits=10, verbose_name='الرسوم الإدارية')),
                ('registration_fee', models.DecimalField(blank=True, decimal_places=2, max_digits=10, verbose_name='رسوم تسجيل العقد (3%)')),
                ('cancellation_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الإلغاء')),
                ('cancellation_reason', models.TextField(blank=True, null=True, verbose_name='سبب الإلغاء')),
            ],
            options={
                'verbose_name': 'عقد إيجار',
                'verbose_name_plural': 'عقود الإيجار',
            },
        ),
        migrations.CreateModel(
            name='NoticeTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم القالب')),
                ('template_type', models.CharField(choices=[('overdue_payment', 'إنذار عدم سداد'), ('contract_termination', 'إنذار فسخ عقد'), ('eviction_notice', 'إنذار إخلاء'), ('lease_renewal', 'تذكير تجديد عقد'), ('maintenance_notice', 'إشعار صيانة')], max_length=30, verbose_name='نوع القالب')),
                ('subject', models.CharField(max_length=300, verbose_name='الموضوع')),
                ('content', models.TextField(help_text='استخدم المتغيرات مثل {tenant_name}, {unit_number}, {amount}, {due_date}', verbose_name='المحتوى')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('legal_compliance_notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات الامتثال القانوني')),
                ('created_date', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_date', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
            ],
            options={
                'verbose_name': 'قالب إنذار',
                'verbose_name_plural': 'قوالب الإنذارات',
                'ordering': ['template_type', 'name'],
            },
        ),
        migrations.CreateModel(
            name='RealEstateOffice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم المكتب العقاري')),
                ('license_number', models.CharField(max_length=100, unique=True, verbose_name='رقم الترخيص')),
                ('contact_person', models.CharField(max_length=150, verbose_name='الشخص المسؤول')),
                ('phone', models.CharField(max_length=20, verbose_name='رقم الهاتف')),
                ('email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='البريد الإلكتروني')),
                ('address', models.TextField(verbose_name='العنوان')),
                ('commission_rate', models.DecimalField(decimal_places=2, default=5.0, help_text='النسبة المئوية من الإيجار الشهري', max_digits=5, verbose_name='نسبة العمولة الافتراضية (%)')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
            ],
            options={
                'verbose_name': 'مكتب عقاري',
                'verbose_name_plural': 'المكاتب العقارية',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='UserProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('phone_number', models.CharField(blank=True, help_text='رقم الهاتف للتحقق عبر OTP', max_length=15, null=True, validators=[django.core.validators.RegexValidator(message='الرجاء إدخال رقم هاتف عماني صالح يبدأ بـ +968 (8 أرقام بعد المقدمة)', regex='^\\+968\\d{8}$')], verbose_name='رقم الهاتف')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='profile', to=settings.AUTH_USER_MODEL, verbose_name='المستخدم')),
            ],
            options={
                'verbose_name': 'ملف المستخدم',
                'verbose_name_plural': 'ملفات المستخدمين',
            },
        ),
        migrations.CreateModel(
            name='Unit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('unit_number', models.CharField(max_length=20, verbose_name='رقم الوحدة')),
                ('unit_type', models.CharField(choices=[('apartment', 'شقة'), ('residential_unit', 'وحدة سكنية'), ('office', 'مكتب'), ('workspace', 'مساحة عمل مكتبية'), ('shop', 'محل'), ('commercial_shop', 'محل تجاري'), ('warehouse', 'مستودع'), ('showroom', 'معرض')], max_length=30, verbose_name='نوع الوحدة')),
                ('floor', models.IntegerField(verbose_name='الطابق')),
                ('is_available', models.BooleanField(default=True, verbose_name='متاحة للإيجار')),
                ('building', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='dashboard.building', verbose_name='المبنى')),
            ],
            options={
                'verbose_name': 'وحدة',
                'verbose_name_plural': 'الوحدات',
            },
        ),
        migrations.CreateModel(
            name='Tenant',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=150, verbose_name='اسم المستأجر')),
                ('name_ar', models.CharField(max_length=150, null=True, verbose_name='اسم المستأجر')),
                ('name_en', models.CharField(max_length=150, null=True, verbose_name='اسم المستأجر')),
                ('tenant_type', models.CharField(choices=[('individual', 'فرد'), ('natural_person', 'شخص طبيعي'), ('company', 'شركة'), ('legal_entity', 'كيان قانوني'), ('corporation', 'مؤسسة'), ('partnership', 'شراكة')], max_length=30, verbose_name='نوع المستأجر')),
                ('phone', models.CharField(max_length=15, verbose_name='رقم الهاتف')),
                ('email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='البريد الإلكتروني')),
                ('authorized_signatory', models.CharField(blank=True, help_text='يُملأ فقط في حال كان المستأجر شركة', max_length=150, null=True, verbose_name='المفوض بالتوقيع')),
                ('authorized_signatory_ar', models.CharField(blank=True, help_text='يُملأ فقط في حال كان المستأجر شركة', max_length=150, null=True, verbose_name='المفوض بالتوقيع')),
                ('authorized_signatory_en', models.CharField(blank=True, help_text='يُملأ فقط في حال كان المستأجر شركة', max_length=150, null=True, verbose_name='المفوض بالتوقيع')),
                ('rating', models.IntegerField(choices=[(1, '1'), (2, '2'), (3, '3'), (4, '4'), (5, '5')], default=3, help_text='من 1 إلى 5 نجوم.', verbose_name='تقييم العميل')),
                ('user', models.OneToOneField(blank=True, help_text='اربط المستأجر بحساب مستخدم لتسجيل الدخول إلى البوابة.', null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='حساب المستخدم')),
            ],
            options={
                'verbose_name': 'مستأجر',
                'verbose_name_plural': 'المستأجرين',
            },
        ),
        migrations.CreateModel(
            name='SecurityDeposit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('received_date', models.DateField(default=django.utils.timezone.now, verbose_name='تاريخ الاستلام')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='مبلغ التأمين')),
                ('payment_method', models.CharField(choices=[('cash', 'نقداً'), ('check', 'شيك'), ('bank_transfer', 'تحويل بنكي'), ('other', 'أخرى')], default='cash', max_length=20, verbose_name='طريقة الدفع')),
                ('check_number', models.CharField(blank=True, max_length=50, null=True, verbose_name='رقم الشيك')),
                ('check_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الشيك')),
                ('bank_name', models.CharField(blank=True, max_length=100, null=True, verbose_name='اسم البنك')),
                ('check_status', models.CharField(blank=True, choices=[('pending', 'معلق - في الانتظار'), ('cashed', 'تم الصرف'), ('returned', 'مرتجع')], default='pending', max_length=20, null=True, verbose_name='حالة الشيك')),
                ('return_reason', models.TextField(blank=True, null=True, verbose_name='سبب إرجاع الشيك')),
                ('status', models.CharField(choices=[('held', 'محجوز'), ('refunded', 'تم إرجاعه'), ('applied', 'مستخدم')], default='held', max_length=20, verbose_name='حالة التأمين')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
                ('lease', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='security_deposits', to='dashboard.lease', verbose_name='العقد')),
            ],
            options={
                'verbose_name': 'تأمين',
                'verbose_name_plural': 'التأمينات',
                'ordering': ['-received_date'],
            },
        ),
        migrations.CreateModel(
            name='RentCollection',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('collection_date', models.DateField(default=django.utils.timezone.now, verbose_name='تاريخ الاستلام')),
                ('amount_collected', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='المبلغ المستلم')),
                ('collection_method', models.CharField(choices=[('cash', 'نقداً'), ('check', 'شيك'), ('bank_transfer', 'تحويل بنكي'), ('other', 'أخرى')], max_length=20, verbose_name='طريقة الاستلام')),
                ('status', models.CharField(choices=[('collected', 'تم الاستلام'), ('pending', 'في الانتظار'), ('overdue', 'متأخر')], default='collected', max_length=20, verbose_name='حالة الاستلام')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('lease', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='dashboard.lease', verbose_name='العقد')),
                ('real_estate_office', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='dashboard.realestateoffice', verbose_name='المكتب العقاري')),
            ],
            options={
                'verbose_name': 'استلام إيجار',
                'verbose_name_plural': 'استلام الإيجارات',
                'ordering': ['-collection_date'],
            },
        ),
        migrations.CreateModel(
            name='PaymentOverdueNotice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notice_date', models.DateField(default=django.utils.timezone.now, verbose_name='تاريخ الإنذار')),
                ('legal_deadline', models.DateField(verbose_name='الموعد النهائي القانوني')),
                ('status', models.CharField(choices=[('draft', 'مسودة'), ('sent', 'تم الإرسال'), ('acknowledged', 'تم الاستلام'), ('resolved', 'تم الحل'), ('escalated', 'تم التصعيد')], default='draft', max_length=20, verbose_name='حالة الإنذار')),
                ('potential_legal_action', models.CharField(choices=[('none', 'لا يوجد'), ('contract_termination', 'فسخ العقد'), ('eviction', 'الإخلاء'), ('legal_proceedings', 'إجراءات قانونية')], default='contract_termination', max_length=30, verbose_name='الإجراء القانوني المحتمل')),
                ('sent_date', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الإرسال')),
                ('acknowledged_date', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الاستلام')),
                ('resolved_date', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الحل')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
                ('delivery_method', models.CharField(blank=True, max_length=50, null=True, verbose_name='طريقة التسليم')),
                ('recipient_signature', models.CharField(blank=True, max_length=100, null=True, verbose_name='توقيع المستلم')),
                ('lease', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='overdue_notices', to='dashboard.lease', verbose_name='العقد')),
            ],
            options={
                'verbose_name': 'إنذار عدم سداد',
                'verbose_name_plural': 'إنذارات عدم السداد',
                'ordering': ['-notice_date'],
                'unique_together': {('lease', 'notice_date')},
            },
        ),
        migrations.CreateModel(
            name='Payment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('payment_date', models.DateField(verbose_name='تاريخ الدفع')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='المبلغ المدفوع')),
                ('payment_for_month', models.IntegerField(choices=[(1, '1'), (2, '2'), (3, '3'), (4, '4'), (5, '5'), (6, '6'), (7, '7'), (8, '8'), (9, '9'), (10, '10'), (11, '11'), (12, '12')], verbose_name='دفعة عن شهر')),
                ('payment_for_year', models.IntegerField(default=2025, verbose_name='دفعة عن سنة')),
                ('payment_method', models.CharField(choices=[('cash', 'نقداً'), ('check', 'شيك'), ('bank_transfer', 'تحويل بنكي'), ('other', 'أخرى')], default='cash', max_length=20, verbose_name='طريقة الدفع')),
                ('check_number', models.CharField(blank=True, max_length=50, null=True, verbose_name='رقم الشيك')),
                ('check_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الشيك')),
                ('bank_name', models.CharField(blank=True, max_length=100, null=True, verbose_name='اسم البنك')),
                ('check_status', models.CharField(blank=True, choices=[('pending', 'معلق - في الانتظار'), ('cashed', 'تم الصرف'), ('returned', 'مرتجع')], default='pending', max_length=20, null=True, verbose_name='حالة الشيك')),
                ('return_reason', models.TextField(blank=True, null=True, verbose_name='سبب إرجاع الشيك')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
                ('lease', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='dashboard.lease', verbose_name='العقد')),
            ],
            options={
                'verbose_name': 'دفعة',
                'verbose_name_plural': 'الدفعات',
                'ordering': ['-payment_date'],
            },
        ),
        migrations.CreateModel(
            name='OTP',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=6, verbose_name='رمز التحقق')),
                ('phone_number', models.CharField(max_length=15, validators=[django.core.validators.RegexValidator(message='الرجاء إدخال رقم هاتف عماني صالح يبدأ بـ +968 (8 أرقام بعد المقدمة)', regex='^\\+968\\d{8}$')], verbose_name='رقم الهاتف')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('expires_at', models.DateTimeField(verbose_name='تاريخ الانتهاء')),
                ('is_used', models.BooleanField(default=False, verbose_name='مستخدم')),
                ('purpose', models.CharField(choices=[('login', 'تسجيل الدخول'), ('reset_password', 'إعادة تعيين كلمة المرور'), ('verify_phone', 'التحقق من رقم الهاتف')], default='login', max_length=50, verbose_name='الغرض')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='otps', to=settings.AUTH_USER_MODEL, verbose_name='المستخدم')),
            ],
            options={
                'verbose_name': 'رمز التحقق',
                'verbose_name_plural': 'رموز التحقق',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('message', models.TextField(verbose_name='الرسالة')),
                ('read', models.BooleanField(default=False, verbose_name='مقروءة')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='الوقت')),
                ('object_id', models.PositiveIntegerField(blank=True, null=True)),
                ('content_type', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to=settings.AUTH_USER_MODEL, verbose_name='المستخدم')),
            ],
            options={
                'verbose_name': 'إشعار',
                'verbose_name_plural': 'الإشعارات',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='MaintenanceRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='عنوان الطلب')),
                ('description', models.TextField(verbose_name='وصف المشكلة')),
                ('priority', models.CharField(choices=[('low', 'منخفضة'), ('medium', 'متوسطة'), ('high', 'عالية')], default='medium', max_length=10, verbose_name='الأولوية')),
                ('status', models.CharField(choices=[('submitted', 'تم الإرسال'), ('in_progress', 'قيد التنفيذ'), ('completed', 'مكتمل'), ('cancelled', 'ملغي')], default='submitted', max_length=20, verbose_name='الحالة')),
                ('image', models.ImageField(blank=True, null=True, upload_to='maintenance_requests/', verbose_name='صورة مرفقة (اختياري)')),
                ('reported_date', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإبلاغ')),
                ('staff_notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات الموظف')),
                ('lease', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='maintenance_requests', to='dashboard.lease', verbose_name='العقد')),
            ],
            options={
                'verbose_name': 'طلب صيانة',
                'verbose_name_plural': 'طلبات الصيانة',
                'ordering': ['-reported_date'],
            },
        ),
        migrations.AddField(
            model_name='lease',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='dashboard.tenant', verbose_name='المستأجر'),
        ),
        migrations.AddField(
            model_name='lease',
            name='unit',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='dashboard.unit', verbose_name='الوحدة'),
        ),
        migrations.CreateModel(
            name='InvoiceItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('description', models.CharField(max_length=255, verbose_name='الوصف')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='المبلغ')),
                ('invoice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='dashboard.invoice', verbose_name='الفاتورة')),
            ],
            options={
                'verbose_name': 'بند الفاتورة',
                'verbose_name_plural': 'بنود الفواتير',
            },
        ),
        migrations.AddField(
            model_name='invoice',
            name='lease',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='invoices', to='dashboard.lease', verbose_name='العقد'),
        ),
        migrations.AddField(
            model_name='invoice',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='invoices', to='dashboard.tenant', verbose_name='المستأجر'),
        ),
        migrations.CreateModel(
            name='Expense',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(choices=[('maintenance', 'صيانة'), ('utilities', 'خدمات (كهرباء، ماء)'), ('salaries', 'رواتب'), ('marketing', 'تسويق'), ('admin', 'رسوم إدارية/حكومية'), ('other', 'أخرى')], max_length=50, verbose_name='فئة المصروف')),
                ('description', models.CharField(max_length=255, verbose_name='الوصف')),
                ('description_ar', models.CharField(max_length=255, null=True, verbose_name='الوصف')),
                ('description_en', models.CharField(max_length=255, null=True, verbose_name='الوصف')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='المبلغ')),
                ('expense_date', models.DateField(verbose_name='تاريخ المصروف')),
                ('receipt', models.FileField(blank=True, null=True, upload_to='expense_receipts/', verbose_name='إيصال/فاتورة (اختياري)')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('building', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='expenses', to='dashboard.building', verbose_name='المبنى')),
            ],
            options={
                'verbose_name': 'مصروف',
                'verbose_name_plural': 'المصاريف',
                'ordering': ['-expense_date'],
            },
        ),
        migrations.CreateModel(
            name='Document',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='عنوان المستند')),
                ('file', models.FileField(upload_to='lease_documents/', verbose_name='الملف')),
                ('uploaded_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الرفع')),
                ('lease', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='dashboard.lease', verbose_name='العقد')),
            ],
            options={
                'verbose_name': 'مستند',
                'verbose_name_plural': 'المستندات',
                'ordering': ['-uploaded_at'],
            },
        ),
        migrations.CreateModel(
            name='CommissionDistribution',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('owner_share', models.DecimalField(decimal_places=2, help_text='المبلغ المستحق لمالك المبنى', max_digits=10, verbose_name='حصة المالك')),
                ('office_commission', models.DecimalField(decimal_places=2, help_text='عمولة المكتب العقاري', max_digits=10, verbose_name='عمولة المكتب')),
                ('distribution_date', models.DateField(blank=True, null=True, verbose_name='تاريخ التوزيع')),
                ('status', models.CharField(choices=[('pending', 'في الانتظار'), ('distributed', 'تم التوزيع'), ('cancelled', 'ملغي')], default='pending', max_length=20, verbose_name='حالة التوزيع')),
                ('payment_method', models.CharField(blank=True, choices=[('cash', 'نقداً'), ('check', 'شيك'), ('bank_transfer', 'تحويل بنكي'), ('other', 'أخرى')], max_length=20, null=True, verbose_name='طريقة الدفع')),
                ('payment_reference', models.CharField(blank=True, max_length=100, null=True, verbose_name='مرجع الدفع')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('building_owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='dashboard.buildingowner', verbose_name='مالك المبنى')),
                ('commission_agreement', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='dashboard.commissionagreement', verbose_name='اتفاقية العمولة')),
                ('rent_collection', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='dashboard.rentcollection', verbose_name='استلام الإيجار')),
            ],
            options={
                'verbose_name': 'توزيع عمولة',
                'verbose_name_plural': 'توزيع العمولات',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='commissionagreement',
            name='real_estate_office',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='dashboard.realestateoffice', verbose_name='المكتب العقاري'),
        ),
        migrations.CreateModel(
            name='PaymentOverdueDetail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('overdue_month', models.IntegerField(choices=[(1, '1'), (2, '2'), (3, '3'), (4, '4'), (5, '5'), (6, '6'), (7, '7'), (8, '8'), (9, '9'), (10, '10'), (11, '11'), (12, '12')], verbose_name='الشهر المتأخر')),
                ('overdue_year', models.IntegerField(default=2025, verbose_name='السنة المتأخرة')),
                ('overdue_amount', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='المبلغ المتأخر')),
                ('due_date', models.DateField(verbose_name='تاريخ الاستحقاق الأصلي')),
                ('notice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='details', to='dashboard.paymentoverduenotice', verbose_name='الإنذار')),
            ],
            options={
                'verbose_name': 'تفصيل تأخير دفعة',
                'verbose_name_plural': 'تفاصيل تأخير الدفعات',
                'ordering': ['overdue_year', 'overdue_month'],
                'unique_together': {('notice', 'overdue_month', 'overdue_year')},
            },
        ),
        migrations.CreateModel(
            name='LeaseRenewalReminder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('reminder_date', models.DateField(default=django.utils.timezone.now, verbose_name='تاريخ التذكير')),
                ('days_before_expiry', models.IntegerField(default=30, verbose_name='عدد الأيام قبل الانتهاء')),
                ('status', models.CharField(choices=[('pending', 'في الانتظار'), ('sent', 'تم الإرسال'), ('acknowledged', 'تم الاستلام'), ('responded', 'تم الرد'), ('expired', 'منتهي الصلاحية')], default='pending', max_length=20, verbose_name='حالة التذكير')),
                ('response', models.CharField(blank=True, choices=[('no_response', 'لا رد'), ('interested', 'مهتم بالتجديد'), ('not_interested', 'غير مهتم بالتجديد'), ('negotiating', 'قيد التفاوض')], default='no_response', max_length=20, null=True, verbose_name='رد المستأجر')),
                ('response_date', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الرد')),
                ('response_notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات الرد')),
                ('sent_date', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الإرسال')),
                ('delivery_method', models.CharField(blank=True, max_length=50, null=True, verbose_name='طريقة التسليم')),
                ('recipient_signature', models.CharField(blank=True, max_length=100, null=True, verbose_name='توقيع المستلم')),
                ('proposed_renewal_date', models.DateField(blank=True, null=True, verbose_name='تاريخ التجديد المقترح')),
                ('proposed_monthly_rent', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='إيجار شهري مقترح')),
                ('proposed_terms', models.TextField(blank=True, null=True, verbose_name='شروط التجديد المقترحة')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات إضافية')),
                ('lease', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='renewal_reminders', to='dashboard.lease', verbose_name='العقد')),
            ],
            options={
                'verbose_name': 'تذكير تجديد عقد',
                'verbose_name_plural': 'تذكيرات تجديد العقود',
                'ordering': ['-reminder_date'],
                'unique_together': {('lease', 'reminder_date')},
            },
        ),
    ]
