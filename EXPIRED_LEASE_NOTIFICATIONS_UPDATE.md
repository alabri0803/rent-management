# โ ุฅุถุงูุฉ ูุณู ุฅุดุนุงุฑุงุช ุงูุนููุฏ ุงูููุชููุฉ ูู ุตูุญุฉ ุชูุงุตูู ุงูุนูุฏ

## ๐ฏ ุงููุดููุฉ ุงูุฃุตููุฉ

ุนูุฏ ุนุฑุถ ุนูุฏ ููุชูู (expired)ุ ูุงูุช ุงูุฅุดุนุงุฑุงุช ุงูุชุงููุฉ **ููุฌูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช** ููู **ูุง ุชุธูุฑ ูู ุตูุญุฉ ุงูุนูุฏ**:

```
โ ุฑุณุงูุฉ "ูู ูุฏูู ุฑุบุจุฉ ูู ุชุฌุฏูุฏ ุนูุฏ ุงูุฅูุฌุงุฑุ"
โ ุฅูุฐุงุฑ "ุชุฃุฎูุฑ ูู ุชุฌุฏูุฏ ุนูุฏ ุงูุฅูุฌุงุฑ ูุฃูุซุฑ ูู 3 ุฃุดูุฑ"
```

**ุงูุณุจุจ:**
ุงูุฃุฒุฑุงุฑ ุงูููุฌูุฏุฉ ูุงูุช ููุท ููุนููุฏ **ุงููุดุทุฉ** (active):
```html
<!-- ุงูุดุฑุท ุงููุฏูู -->
{% if lease.status == 'active' and lease.days_until_expiry <= 90 %}
    ุฑุณุงูุฉ ุชุฐููุฑ ุงูุชุฌุฏูุฏ
{% endif %}
```

---

## โ ุงูุญู ุงููุทุจู

### 1๏ธโฃ **ุฅุถุงูุฉ ูุณู ุฎุงุต ููุนููุฏ ุงูููุชููุฉ**

ุชู ุฅุถุงูุฉ ูุณู ูุงูู ูุธูุฑ **ููุท ููุนููุฏ ุงูููุชููุฉ** ูุนุฑุถ:

#### ๐ **ูุนูููุงุช ุงูุงูุชูุงุก:**
```
๐ ุชุงุฑูุฎ ุงูุงูุชูุงุก: 27/03/2025
โฐ ูุฏุฉ ุงูุชุฃุฎูุฑ: 6 ุดูุฑ ู 25 ููู
```

#### ๐ฌ **ุฑุณุงูุฉ ุงูุชุฌุฏูุฏ:**
```
๐ฌ ุฑุณุงูุฉ ุชุฌุฏูุฏ
ูู ูุฏูู ุฑุบุจุฉ ูู ุชุฌุฏูุฏ ุนูุฏ ุงูุฅูุฌุงุฑุ
```

#### ๐จ **ุฅูุฐุงุฑ ุชุฃุฎูุฑ ุงูุชุฌุฏูุฏ** (ูุธูุฑ ุจุนุฏ 90 ููู):
```
๐จ ุฅูุฐุงุฑ ุชุฃุฎูุฑ ุงูุชุฌุฏูุฏ
ุชุฃุฎูุฑ ูู ุชุฌุฏูุฏ ุนูุฏ ุงูุฅูุฌุงุฑ ูุฃูุซุฑ ูู 3 ุฃุดูุฑ. 
ูุฑุฌู ุงูุชูุงุตู ูุชุฌุฏูุฏ ุงูุนูุฏ ุฃู ุฅุฎูุงุก ุงููุญุฏุฉ.
```

---

## ๐ ุงูููุฏ ุงูููุถุงู

### ูู `lease_detail.html`:

```html
<!-- ุฅุดุนุงุฑุงุช ุงูุนูุฏ ุงูููุชูู - ุชุธูุฑ ููุนููุฏ ุงูููุชููุฉ -->
{% if lease.status == 'expired' %}
<div class="w-full mt-4 p-6 bg-gradient-to-r from-orange-50 to-red-50 border-r-4 border-orange-500 rounded-xl">
    <div class="flex items-center mb-4">
        <div class="bg-orange-500 rounded-full p-2 ml-3">
            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
        </div>
        <h3 class="text-lg font-bold text-orange-900">โ๏ธ {% trans "ุนูุฏ ููุชูู" %}</h3>
    </div>
    
    <div class="space-y-3">
        <!-- ุชุงุฑูุฎ ุงูุงูุชูุงุก ููุฏุฉ ุงูุชุฃุฎูุฑ -->
        <div class="bg-white p-4 rounded-lg border border-orange-200">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-orange-800 font-semibold text-sm">๐ {% trans "ุชุงุฑูุฎ ุงูุงูุชูุงุก" %}</p>
                    <p class="text-orange-900 font-bold">{{ lease.end_date|date:"d/m/Y" }}</p>
                </div>
                <div class="text-left">
                    <p class="text-orange-800 font-semibold text-sm">โฐ {% trans "ูุฏุฉ ุงูุชุฃุฎูุฑ" %}</p>
                    <p class="text-orange-900 font-bold">{{ lease.overdue_duration_display|default:"-" }}</p>
                </div>
            </div>
        </div>
        
        <!-- ุฑุณุงูุฉ ุงูุชุฌุฏูุฏ -->
        <div class="bg-orange-100 p-4 rounded-lg">
            <p class="text-orange-900 font-semibold mb-2">๐ฌ {% trans "ุฑุณุงูุฉ ุชุฌุฏูุฏ" %}</p>
            <p class="text-orange-800">
                {% trans "ูู ูุฏูู ุฑุบุจุฉ ูู ุชุฌุฏูุฏ ุนูุฏ ุงูุฅูุฌุงุฑุ" %}
            </p>
        </div>
        
        <!-- ุฅูุฐุงุฑ ุชุฃุฎูุฑ ุงูุชุฌุฏูุฏ (ุจุนุฏ 90 ููู) -->
        {% with days_overdue=lease.days_overdue %}
        {% if days_overdue >= 90 %}
        <div class="bg-red-100 p-4 rounded-lg border-2 border-red-300">
            <p class="text-red-900 font-bold mb-2">๐จ {% trans "ุฅูุฐุงุฑ ุชุฃุฎูุฑ ุงูุชุฌุฏูุฏ" %}</p>
            <p class="text-red-800">
                {% trans "ุชุฃุฎูุฑ ูู ุชุฌุฏูุฏ ุนูุฏ ุงูุฅูุฌุงุฑ ูุฃูุซุฑ ูู 3 ุฃุดูุฑ. ูุฑุฌู ุงูุชูุงุตู ูุชุฌุฏูุฏ ุงูุนูุฏ ุฃู ุฅุฎูุงุก ุงููุญุฏุฉ." %}
            </p>
        </div>
        {% endif %}
        {% endwith %}
    </div>
</div>
{% endif %}
```

---

## ๐จ ุงูุชุตููู

### ๐ **ุจุทุงูุฉ ุงูุนูุฏ ุงูููุชูู:**
- ุฎูููุฉ ูุชุฏุฑุฌุฉ ูู ุงูุจุฑุชูุงูู ุฅูู ุงูุฃุญูุฑ ุงููุงุชุญ
- ุญุฏู ุฃููู ุจุฑุชูุงูู ุณููู
- ุฃููููุฉ ุชุญุฐูุฑ ุฏุงุฆุฑูุฉ

### โช **ูุนูููุงุช ุงูุงูุชูุงุก:**
- ุฎูููุฉ ุจูุถุงุก ูุน ุญุฏูุฏ ุจุฑุชูุงููุฉ
- ุนููุฏูู: ุชุงุฑูุฎ ุงูุงูุชูุงุก | ูุฏุฉ ุงูุชุฃุฎูุฑ

### ๐ก **ุฑุณุงูุฉ ุงูุชุฌุฏูุฏ:**
- ุฎูููุฉ ุจุฑุชูุงููุฉ ูุงุชุญุฉ
- ูุต ูุงุถุญ ููุณุคุงู

### ๐ด **ุฅูุฐุงุฑ ุงูุชุฃุฎูุฑ:**
- ูุธูุฑ ููุท ุจุนุฏ **90 ููู** (3 ุฃุดูุฑ)
- ุฎูููุฉ ุญูุฑุงุก ูุงุชุญุฉ ูุน ุญุฏูุฏ ุญูุฑุงุก
- ุฑุณุงูุฉ ูููุฉ ููุชุญุฐูุฑ

---

## ๐ ุงูุชุฑุฌูุงุช ุงูุฅูุฌููุฒูุฉ

ุชู ุฅุถุงูุฉ ูุชุตุญูุญ ุงูุชุฑุฌูุงุช ุงูุชุงููุฉ:

```
ุนูุฏ ููุชูู โ Expired Contract
ุชุงุฑูุฎ ุงูุงูุชูุงุก โ End Date
ูุฏุฉ ุงูุชุฃุฎูุฑ โ Delay Duration
ุฑุณุงูุฉ ุชุฌุฏูุฏ โ Renewal Message
ูู ูุฏูู ุฑุบุจุฉ ูู ุชุฌุฏูุฏ ุนูุฏ ุงูุฅูุฌุงุฑุ โ Would you like to renew the lease contract?
ุฅูุฐุงุฑ ุชุฃุฎูุฑ ุงูุชุฌุฏูุฏ โ Renewal Delay Notice
ุชุฃุฎูุฑ ูู ุชุฌุฏูุฏ ุนูุฏ ุงูุฅูุฌุงุฑ ูุฃูุซุฑ ูู 3 ุฃุดูุฑ... โ Delay in renewing the lease contract for more than 3 months...
```

---

## ๐ข ุงูุฎุตุงุฆุต ุงููุณุชุฎุฏูุฉ ูู ูููุฐุฌ Lease

### โ ุฎุตุงุฆุต ููุฌูุฏุฉ ูุณุจูุงู:

#### 1. `overdue_duration_display()` - ุฏุงูุฉ
**ุงููุธููุฉ:** ุชุนุฑุถ ูุฏุฉ ุงูุชุฃุฎูุฑ ุจุตูุบุฉ (ุณูุฉุ ุดูุฑุ ููู)
```python
def overdue_duration_display(self):
    """ูุฏุฉ ุงูุชุฃุฎูุฑ ุจุตูุบุฉ (ุณูุฉุ ุดูุฑุ ููู) ููุนููุฏ ุงูููุชููุฉ"""
    if self.status not in ['expired', 'renewed']:
        return None
    today = timezone.now().date()
    if today <= self.end_date:
        return None
    rd = relativedelta(today, self.end_date)
    parts = []
    if rd.years:
        parts.append(_("%(years)s ุณูุฉ") % {"years": rd.years})
    if rd.months:
        parts.append(_("%(months)s ุดูุฑ") % {"months": rd.months})
    if rd.days or not parts:
        parts.append(_("%(days)s ููู") % {"days": rd.days})
    return "ุ ".join(parts)
```

**ูุซุงู ุงูุฅุฎุฑุงุฌ:** `"6 ุดูุฑุ 25 ููู"`

---

#### 2. `days_overdue()` - ุฏุงูุฉ
**ุงููุธููุฉ:** ุชุนูุฏ ุนุฏุฏ ุงูุฃูุงู ููุฐ ุงูุชูุงุก ุงูุนูุฏ
```python
def days_overdue(self):
    """ุนุฏุฏ ุฃูุงู ุงูุชุฃุฎูุฑ ููุนููุฏ ุงูููุชููุฉ"""
    if self.status not in ['expired', 'renewed']:
        return 0
    today = timezone.now().date()
    if today <= self.end_date:
        return 0
    return (today - self.end_date).days
```

**ูุซุงู ุงูุฅุฎุฑุงุฌ:** `205` (ุฃูุงู)

**ุงูุงุณุชุฎุฏุงู:** ูุชุญุฏูุฏ ูุชู ูุธูุฑ ุฅูุฐุงุฑ ุงูุชุฃุฎูุฑ (โฅ 90 ููู)

---

## ๐ ูุซุงู ุนูู ุนูุฏ ููุชูู: 21053/2024

### ูุนูููุงุช ุงูุนูุฏ:
```
ุฑูู ุงูุนูุฏ: 21053/2024
ุงููุณุชุฃุฌุฑ: ูุณุงุฑ ููุชูููุฉ ูุงูุชุฏุฑูุจ
ุงููุญุฏุฉ: ุจูุช ุงูุญูุฏ - ูคูก
ุชุงุฑูุฎ ุงูุจุฏุก: 01/04/2024
ุชุงุฑูุฎ ุงูุงูุชูุงุก: 27/03/2025
ุงูุญุงูุฉ: expired
```

### ุญุณุงุจุงุช ุงูุชุฃุฎูุฑ:
```
ุงูููู: 22/10/2025
ุชุงุฑูุฎ ุงูุงูุชูุงุก: 27/03/2025
ูุฏุฉ ุงูุชุฃุฎูุฑ: 209 ุฃูุงู
         = 6 ุดูุฑ ู 25 ููู
         = ุฃูุซุฑ ูู 90 ููู โ
```

### ูุง ุณููุนุฑุถ:
```
โ ูุณู "ุนูุฏ ููุชูู" (ุฎูููุฉ ุจุฑุชูุงููุฉ)
   โโ ๐ ุชุงุฑูุฎ ุงูุงูุชูุงุก: 27/03/2025
   โโ โฐ ูุฏุฉ ุงูุชุฃุฎูุฑ: 6 ุดูุฑ ู 25 ููู
   โโ ๐ฌ ุฑุณุงูุฉ ุชุฌุฏูุฏ: "ูู ูุฏูู ุฑุบุจุฉ ูู ุชุฌุฏูุฏ ุนูุฏ ุงูุฅูุฌุงุฑุ"
   โโ ๐จ ุฅูุฐุงุฑ ุชุฃุฎูุฑ ุงูุชุฌุฏูุฏ (ูุฃู 209 โฅ 90)
      "ุชุฃุฎูุฑ ูู ุชุฌุฏูุฏ ุนูุฏ ุงูุฅูุฌุงุฑ ูุฃูุซุฑ ูู 3 ุฃุดูุฑ..."
```

---

## ๐ ุงููุฑู ุจูู ุงููุฏูู ูุงูุฌุฏูุฏ

### โ **ุงููุฏูู:**
```
๐ ุฅูุฐุงุฑุงุช ุงูุนูุฏ (1)   โ ุฒุฑ ูุนุทูู (ุฑูุงุฏู)
```
**ููุท!** ูุง ุชูุฌุฏ ุฑุณุงุฆู ุฃู ุฅูุฐุงุฑุงุช ูุงุถุญุฉ

---

### โ **ุงูุฌุฏูุฏ:**
```
๐ ุฅูุฐุงุฑุงุช ุงูุนูุฏ (1)   โ ุฒุฑ ูุดุท ููุชุญ ุงููุงุฆูุฉ

โ๏ธ ุนูุฏ ููุชูู               โ ูุณู ุฌุฏูุฏ ูุงูู
โโ ๐ ุชุงุฑูุฎ ุงูุงูุชูุงุก
โโ โฐ ูุฏุฉ ุงูุชุฃุฎูุฑ
โโ ๐ฌ ุฑุณุงูุฉ ุชุฌุฏูุฏ
โโ ๐จ ุฅูุฐุงุฑ ุชุฃุฎูุฑ (ุจุนุฏ 90 ููู)
```

---

## ๐ฑ ุงูุนุฑุถ ุนูู ุงูุฃุฌูุฒุฉ

### ๐ฅ๏ธ **Desktop:**
- ุงููุณู ุจุนุฑุถ ูุงูู
- ูุนูููุงุช ุฌูุจุงู ุฅูู ุฌูุจ

### ๐ฑ **Mobile:**
- ุงููุณู ูุชููู ุชููุงุฆูุงู
- ุงููุนูููุงุช ุชุชุฑุชุจ ุนููุฏูุงู

---

## ๐ฏ ูุชู ูุธูุฑ ูู ุนูุตุฑุ

| ุงูุนูุตุฑ | ุงูุดุฑุท | ูุซุงู |
|--------|-------|------|
| **ูุณู "ุนูุฏ ููุชูู"** | `lease.status == 'expired'` | ุงูุนูุฏ 21053/2024 โ |
| **ุชุงุฑูุฎ ุงูุงูุชูุงุก** | ุฏุงุฆูุงู (ููุนููุฏ ุงูููุชููุฉ) | 27/03/2025 |
| **ูุฏุฉ ุงูุชุฃุฎูุฑ** | ุฏุงุฆูุงู (ููุนููุฏ ุงูููุชููุฉ) | 6 ุดูุฑ ู 25 ููู |
| **ุฑุณุงูุฉ ุงูุชุฌุฏูุฏ** | ุฏุงุฆูุงู (ููุนููุฏ ุงูููุชููุฉ) | "ูู ูุฏูู ุฑุบุจุฉ..." |
| **ุฅูุฐุงุฑ ุงูุชุฃุฎูุฑ** | `lease.days_overdue() >= 90` | 209 ุฃูุงู โ |

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

| ุงูููู | ุงูุชุบููุฑ |
|------|---------|
| `templates/dashboard/lease_detail.html` | โ ุฅุถุงูุฉ ูุณู ุงูุนูุฏ ุงูููุชูู ูุงูู |
| `locale/en/LC_MESSAGES/django.po` | โ ุฅุถุงูุฉ 5 ุชุฑุฌูุงุช ุฌุฏูุฏุฉ |
| `EXPIRED_LEASE_NOTIFICATIONS_UPDATE.md` | โจ ููู ุงูุชูุซูู (ูุฐุง ุงูููู) |

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ููุชุญูู ูู ุงูุนูู:

```bash
# 1. ุชุญุฏูุซ ุญุงูุงุช ุงูุนููุฏ
python manage.py update_lease_statues

# 2. ุฒูุงุฑุฉ ุตูุญุฉ ุงูุนูุฏ
http://localhost:8000/dashboard/leases/<id>/

# 3. ุงูุชุญูู ูู ุงููุณู ุงูุฌุฏูุฏ
โ ูุธูุฑ ูุณู "โ๏ธ ุนูุฏ ููุชูู"
โ ูุนุฑุถ ุชุงุฑูุฎ ุงูุงูุชูุงุก ููุฏุฉ ุงูุชุฃุฎูุฑ
โ ูุนุฑุถ ุฑุณุงูุฉ ุงูุชุฌุฏูุฏ
โ ูุนุฑุถ ุฅูุฐุงุฑ ุงูุชุฃุฎูุฑ (ุฅุฐุง > 90 ููู)
```

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงูุขู ุนูุฏ ุฒูุงุฑุฉ **ุฃู ุนูุฏ ููุชูู** ุณูุฑู ุงููุณุชุฎุฏู:

```
๐ ุจูุช ุงูุญูุฏ - ูคูก
๐ฐ 350 ุฑ.ุน ุดูุฑูุงู
๐ 01/04/2024 - 27/03/2025

[๐ ุฅูุฐุงุฑุงุช ุงูุนูุฏ (1)]  โ ุฒุฑ ูุดุท

โ๏ธ ุนูุฏ ููุชูู
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ุชุงุฑูุฎ ุงูุงูุชูุงุก: 27/03/2025  โ
โ โฐ ูุฏุฉ ุงูุชุฃุฎูุฑ: 6 ุดูุฑ ู 25 ูููโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ฌ ุฑุณุงูุฉ ุชุฌุฏูุฏ                 โ
โ ูู ูุฏูู ุฑุบุจุฉ ูู ุชุฌุฏูุฏ ุนูุฏ      โ
โ ุงูุฅูุฌุงุฑุ                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐จ ุฅูุฐุงุฑ ุชุฃุฎูุฑ ุงูุชุฌุฏูุฏ         โ
โ ุชุฃุฎูุฑ ูู ุชุฌุฏูุฏ ุนูุฏ ุงูุฅูุฌุงุฑ     โ
โ ูุฃูุซุฑ ูู 3 ุฃุดูุฑ. ูุฑุฌู ุงูุชูุงุตู  โ
โ ูุชุฌุฏูุฏ ุงูุนูุฏ ุฃู ุฅุฎูุงุก ุงููุญุฏุฉ.  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

**ุงูุชุญุฏูุซ:** 22 ุฃูุชูุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ูุทุจูู ูููุฎุชุจุฑ  
**ุงูุชุฃุซูุฑ:** ุชุญุณูู ูุงุถุญ ูู ุนุฑุถ ุญุงูุฉ ุงูุนููุฏ ุงูููุชููุฉ
