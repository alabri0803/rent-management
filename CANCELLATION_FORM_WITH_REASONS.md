# โ ูููุฐุฌ ุฅูุบุงุก ุนูุฏ ุงูุฅูุฌุงุฑ ูุน ุงุฎุชูุงุฑ ุงูุฃุณุจุงุจ

## ๐ฏ ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ

ุชู ุฅุถุงูุฉ **ูููุฐุฌ ุชูุงุนูู ุงุญุชุฑุงูู** ูุฅูุบุงุก ุนูุฏ ุงูุฅูุฌุงุฑ ูุน ุฅููุงููุฉ ุงุฎุชูุงุฑ ุณุจุจ ุงูุฅูุบุงุก ูู **6 ุฃุณุจุงุจ ูุญุฏุฏุฉ ูุณุจูุงู**.

---

## ๐ ุฃุณุจุงุจ ุงูุฅูุบุงุก ุงููุชุงุญุฉ

| ุงูุฃููููุฉ | ุงูุณุจุจ | ุงููุตู |
|---------|-------|-------|
| ๐ | **ุงูุชูุงุก ุงููุฏุฉ ุงููุญุฏุฏุฉ ูู ุงูุนูุฏ** | ุงูุนูุฏ ุงูุชูู ุจุดูู ุทุจูุนู |
| ๐ฐ | **ุนุฏู ุฏูุน ุงูุฅูุฌุงุฑ ูุฃูุซุฑ ูู ุดูุฑูู ูุชุชุงูููู** | ุชุฃุฎุฑ ูู ุงูุณุฏุงุฏ |
| โ๏ธ | **ูุฎุงููุฉ ุดุฑูุท ุงูุนูุฏ ูู ูุจู ุงููุณุชุฃุฌุฑ** | ุงูุชูุงู ุจููุฏ ุงูุนูุฏ |
| ๐ | **ุฑุบุจุฉ ุงููุงูู ูู ุงุณุชุฑุฏุงุฏ ุงูุนูุงุฑ** | ุงููุงูู ูุฑูุฏ ุงุณุชุฑุฌุงุน ุงูุนูุงุฑ |
| ๐ค | **ุฑุบุจุฉ ุงููุณุชุฃุฌุฑ ูู ุฅููุงุก ุงูุนูุฏ** | ุทูุจ ูู ุงููุณุชุฃุฌุฑ |
| ๐ | **ุฃุณุจุงุจ ุฃุฎุฑู** | ูููู ุงูุชูุถูุญ ูู ุงูุชูุงุตูู ุงูุฅุถุงููุฉ |

---

## ๐จ ุงูุชุตููู

### 1๏ธโฃ **ุจุทุงูุงุช ุชูุงุนููุฉ:**
- ูู ุณุจุจ ูู ุจุทุงูุฉ ูููุตูุฉ ูุน ุฃููููุฉ
- ุชุฃุซูุฑุงุช hover ุนูุฏ ุงูุชูุฑูุฑ
- ุชุญุฏูุฏ ุจุตุฑู ูุงุถุญ ุนูุฏ ุงูุงุฎุชูุงุฑ
- ุชุตููู ูุชุฌุงูุจ ููููุจุงูู ูุงูุฏูุณูุชูุจ

### 2๏ธโฃ **ุชุญุฐูุฑ ูุงุถุญ:**
- ุฑุณุงูุฉ ุชุญุฐูุฑูุฉ ุจุงุฑุฒุฉ
- ุชูุถูุญ ุฃู ุงูุฅุฌุฑุงุก ูุง ูููู ุงูุชุฑุงุฌุน ุนูู
- ูุนูููุงุช ุงูุนูุฏ ูุงููุณุชุฃุฌุฑ

### 3๏ธโฃ **ุงูุญููู:**
```
๐ ุชุงุฑูุฎ ุทูุจ ุงูุฅูุบุงุก (ุชููุงุฆู - ุชุงุฑูุฎ ุงูููู)
๐ ุณุจุจ ุงูุฅูุบุงุก (ุงุฎุชูุงุฑ ูุงุญุฏ ูู 6 ุฎูุงุฑุงุช)
๐ ุชูุงุตูู ุฅุถุงููุฉ ูุฃุณุจุงุจ ุฃุฎุฑู (ูุต ุญุฑ)
```

---

## ๐๏ธ ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 1. **ุญููู ุฌุฏูุฏุฉ:**

```python
# ูู ูููุฐุฌ Lease
CANCELLATION_REASON_CHOICES = [
    ('contract_term_ended', 'ุงูุชูุงุก ุงููุฏุฉ ุงููุญุฏุฏุฉ ูู ุงูุนูุฏ'),
    ('non_payment', 'ุนุฏู ุฏูุน ุงูุฅูุฌุงุฑ ูุฃูุซุฑ ูู ุดูุฑูู ูุชุชุงูููู'),
    ('tenant_violation', 'ูุฎุงููุฉ ุดุฑูุท ุงูุนูุฏ ูู ูุจู ุงููุณุชุฃุฌุฑ'),
    ('owner_reclaim', 'ุฑุบุจุฉ ุงููุงูู ูู ุงุณุชุฑุฏุงุฏ ุงูุนูุงุฑ'),
    ('tenant_request', 'ุฑุบุจุฉ ุงููุณุชุฃุฌุฑ ูู ุฅููุงุก ุงูุนูุฏ'),
    ('other', 'ุฃุณุจุงุจ ุฃุฎุฑู'),
]

cancellation_date = DateField()  # ุชุงุฑูุฎ ุงูุฅูุบุงุก
cancellation_reason = CharField(max_length=200, choices=...)  # ุงูุณุจุจ
cancellation_details = TextField()  # ุชูุงุตูู ุฅุถุงููุฉ
```

### 2. **Migration:**
- โ `0010_add_cancellation_details_v2` - ูุทุจู ุจูุฌุงุญ
- โ ุญูู `cancellation_reason` ูุญุฏูุซ ูู TEXT ุฅูู VARCHAR(200)
- โ ุญูู `cancellation_details` ุฌุฏูุฏ ููุชูุงุตูู ุงูุฅุถุงููุฉ

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

| ุงูููู | ุงูุชุบููุฑ |
|------|---------|
| `dashboard/models.py` | โ ุฅุถุงูุฉ CANCELLATION_REASON_CHOICES + ุญูููู ุฌุฏูุฏูู |
| `dashboard/forms.py` | โ ุชุญุฏูุซ LeaseCancelForm ูุน RadioSelect |
| `templates/dashboard/lease_cancel_form.html` | โ ุชุตููู ูุงูู ุฌุฏูุฏ ุจุงูุจุทุงูุงุช |
| `dashboard/migrations/0010_add_cancellation_details_v2.py` | โ Migration ุฌุฏูุฏ |

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1๏ธโฃ **ุงููุตูู ูููููุฐุฌ:**
```
/dashboard/leases/<id>/cancel/
```

ุฃู ูู ุตูุญุฉ ุชูุงุตูู ุงูุนูุฏ โ ุฒุฑ "ุงุณุชูุงุฑุฉ ุฅูุบุงุก ุงูุนูุฏ"

### 2๏ธโฃ **ููุก ุงููููุฐุฌ:**
1. ุชุญูู ูู ุชุงุฑูุฎ ุงูุฅูุบุงุก (ููููุฃ ุชููุงุฆูุงู ุจุชุงุฑูุฎ ุงูููู)
2. ุงุฎุชุฑ ุณุจุจ ุงูุฅูุบุงุก ูู ุงูุจุทุงูุงุช
3. ุฃุถู ุชูุงุตูู ุฅุถุงููุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ (ุฎุงุตุฉ ุฅุฐุง ุงุฎุชุฑุช "ุฃุณุจุงุจ ุฃุฎุฑู")
4. ุงุถุบุท "ุชุฃููุฏ ุงูุฅูุบุงุก"

### 3๏ธโฃ **ุจุนุฏ ุงูุฅูุบุงุก:**
- โ ูุชู ุชุบููุฑ ุญุงูุฉ ุงูุนูุฏ ุฅูู `cancelled`
- โ ูุชู ุญูุธ ุณุจุจ ุงูุฅูุบุงุก ูุงูุชูุงุตูู
- โ ูุชู ุฅูุดุงุก ุงุณุชูุงุฑุฉ ุฅูุบุงุก PDF ุชููุงุฆูุงู
- โ ุชุตุจุญ ุงููุญุฏุฉ ูุชุงุญุฉ ููุฅูุฌุงุฑ ูุฌุฏุฏุงู

---

## ๐ก ูุซุงู ุนููู

### ุงูุณููุงุฑูู:
ูุณุชุฃุฌุฑ ูู ูุฏูุน ุงูุฅูุฌุงุฑ ููุฏุฉ 3 ุฃุดูุฑ โ ูุฑุฑ ุงูููุชุจ ุฅูุบุงุก ุงูุนูุฏ

### ุงูุฎุทูุงุช:
```
1. ุงูุชุญ ุงูุนูุฏ ุงููุฑุงุฏ ุฅูุบุงุคู
2. ุงุถุบุท "ุงุณุชูุงุฑุฉ ุฅูุบุงุก ุงูุนูุฏ"
3. ุงุฎุชุฑ ุงูุจุทุงูุฉ: ๐ฐ "ุนุฏู ุฏูุน ุงูุฅูุฌุงุฑ ูุฃูุซุฑ ูู ุดูุฑูู ูุชุชุงูููู"
4. ุฃุถู ูู ุงูุชูุงุตูู: "ูู ูุฏูุน ุงููุณุชุฃุฌุฑ ููุฏุฉ 3 ุฃุดูุฑ ุฑุบู ุงูุฅูุฐุงุฑุงุช"
5. ุงุถุบุท "ุชุฃููุฏ ุงูุฅูุบุงุก"
```

### ุงููุชูุฌุฉ:
```sql
cancellation_date = 2025-10-22
cancellation_reason = 'non_payment'
cancellation_details = 'ูู ูุฏูุน ุงููุณุชุฃุฌุฑ ููุฏุฉ 3 ุฃุดูุฑ ุฑุบู ุงูุฅูุฐุงุฑุงุช'
status = 'cancelled'
```

---

## ๐จ ููุทุงุช ุงูุดุงุดุฉ (ุงููุตู)

### ๐ฑ **ุงููุงุฌูุฉ:**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ๏ธ  ุฅูุบุงุก ุนูุฏ ุงูุฅูุฌุงุฑ                โ
โ     ุงูุนูุฏ ุฑูู: 21053/2024             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ๏ธ ุชูุจูู ูุงู:                         โ
โ ุณูุชู ุฅูุบุงุก ุงูุนูุฏ ุงูุฎุงุต ุจุงููุณุชุฃุฌุฑ     โ
โ ูุณุงุฑ ููุชูููุฉ ูุงูุชุฏุฑูุจ                โ
โ ูุฐุง ุงูุฅุฌุฑุงุก ูุง ูููู ุงูุชุฑุงุฌุน ุนูู      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ุชุงุฑูุฎ ุทูุจ ุงูุฅูุบุงุก: [22/10/2025]

๐ ุณุจุจ ุงูุฅูุบุงุก
ุงุฎุชุฑ ุงูุณุจุจ

โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ ๐ ุงูุชูุงุก   โ ๐ฐ ุนุฏู ุฏูุน  โ
โ   ุงููุฏุฉ     โ   ุงูุฅูุฌุงุฑ   โ
โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ โ๏ธ ูุฎุงููุฉ   โ ๐ ุฑุบุจุฉ     โ
โ   ุดุฑูุท      โ   ุงููุงูู    โ
โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ ๐ค ุฑุบุจุฉ     โ ๐ ุฃุณุจุงุจ    โ
โ   ุงููุณุชุฃุฌุฑ  โ   ุฃุฎุฑู      โ
โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ

๐ ุชูุงุตูู ุฅุถุงููุฉ ูุฃุณุจุงุจ ุฃุฎุฑู
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [ูุฑุฌู ุชูุถูุญ ุงูุชูุงุตูู...]      โ
โ                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

     [โฉ๏ธ ุชุฑุงุฌุน]  [๐๏ธ ุชุฃููุฏ ุงูุฅูุบุงุก]
```

---

## ๐ ุงูุชูุงูู ูุน ุงููุธุงู

### 1. **ุงุณุชูุงุฑุฉ ุงูุฅูุบุงุก PDF:**
ุนูุฏ ุงูุฅูุบุงุกุ ูุชู ุชูููุฏ PDF ูุญุชูู ุนูู:
- ุณุจุจ ุงูุฅูุบุงุก (ููุชุฑุฌู ูู ุงูููุฏ ุฅูู ุงููุต ุงูุนุฑุจู)
- ุงูุชูุงุตูู ุงูุฅุถุงููุฉ (ุฅู ูุฌุฏุช)
- ุงูุงูุชุฒุงูุงุช ุงููุงููุฉ
- ูุนูููุงุช ูุงููุฉ ุนู ุงูุนูุฏ

### 2. **ุนุฑุถ ุงูุณุจุจ:**
ูู ุตูุญุฉ ุชูุงุตูู ุงูุนูุฏ ุงูููุบู:
```html
ูุนูููุงุช ุงูุฅูุบุงุก:
  ุชุงุฑูุฎ ุงูุฅูุบุงุก: 22/10/2025
  ุณุจุจ ุงูุฅูุบุงุก: ุนุฏู ุฏูุน ุงูุฅูุฌุงุฑ ูุฃูุซุฑ ูู ุดูุฑูู ูุชุชุงูููู
  ุงูุชูุงุตูู: ูู ูุฏูุน ุงููุณุชุฃุฌุฑ ููุฏุฉ 3 ุฃุดูุฑ ุฑุบู ุงูุฅูุฐุงุฑุงุช
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

ููููู ุงูุขู ุชุชุจุน:
- ุนุฏุฏ ุงูุนููุฏ ุงูููุบุงุฉ ุญุณุจ ูู ุณุจุจ
- ุงูุฃุณุจุงุจ ุงูุฃูุซุฑ ุดููุนุงู ููุฅูุบุงุก
- ุงูุนููุฏ ุงูููุบุงุฉ ุจุณุจุจ ุนุฏู ุงูุณุฏุงุฏ
- ุฅูุฎ

### ูุซุงู Query:
```python
from dashboard.models import Lease

# ุนุฏุฏ ุงูุนููุฏ ุงูููุบุงุฉ ุจุณุจุจ ุนุฏู ุงูุฏูุน
non_payment_count = Lease.objects.filter(
    status='cancelled',
    cancellation_reason='non_payment'
).count()

print(f'ุงูุนููุฏ ุงูููุบุงุฉ ุจุณุจุจ ุนุฏู ุงูุฏูุน: {non_payment_count}')
```

---

## โ ุงูููุงุฆุฏ

| ูุจู | ุจุนุฏ |
|-----|-----|
| โ ุญูู ูุต ุญุฑ ููุท | โ ุฎูุงุฑุงุช ูุญุฏุฏุฉ + ูุต ุญุฑ |
| โ ูุง ุชูุฌุฏ ุฃุณุจุงุจ ููุงุณูุฉ | โ 6 ุฃุณุจุงุจ ูุญุฏุฏุฉ ูุณุจูุงู |
| โ ุตุนูุจุฉ ุงูุชุญููู | โ ุณูููุฉ ุชุชุจุน ุงูุฅุญุตุงุฆูุงุช |
| โ ูุงุฌูุฉ ุจุณูุทุฉ | โ ูุงุฌูุฉ ุงุญุชุฑุงููุฉ ุจุงูุจุทุงูุงุช |
| โ ูุง ููุฌุฏ ุชุญุฐูุฑ ูุงุถุญ | โ ุชุญุฐูุฑ ุจุงุฑุฒ ูุจู ุงูุฅูุบุงุก |

---

## ๐ง ูููุทูุฑูู

### ุฅุถุงูุฉ ุณุจุจ ุฅูุบุงุก ุฌุฏูุฏ:

```python
# ูู dashboard/models.py
CANCELLATION_REASON_CHOICES = [
    # ... ุงูุฃุณุจุงุจ ุงูููุฌูุฏุฉ
    ('new_reason', _('ุงูุณุจุจ ุงูุฌุฏูุฏ')),  # ุฃุถู ููุง
]
```

### ุชุฎุตูุต ุงูุฃููููุฉ:

```html
<!-- ูู lease_cancel_form.html -->
{% elif choice.choice_label == "ุงูุณุจุจ ุงูุฌุฏูุฏ" %}
    ๐  <!-- ุบููุฑ ุงูุฃููููุฉ ููุง -->
{% endif %}
```

---

**ุงูุชุญุฏูุซ:** 22 ุฃูุชูุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู  
**ุงูุชุฃุซูุฑ:** ุชุญุณูู ูุจูุฑ ูู ุฅุฏุงุฑุฉ ุฅูุบุงุก ุงูุนููุฏ ูุชุชุจุน ุงูุฃุณุจุงุจ
